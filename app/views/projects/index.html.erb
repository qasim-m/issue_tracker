<% content_for :title, "Projects" %>
<div class="main_container bg-white shadow-lg p-8 rounded-xl">
  <div class="justify_between_container mb-4">
    <h1 class="heading_lg">Projects</h1>
    <%= link_to "Create New Project", new_project_path, class: "btn_primary py-2" %>
  </div>
  <div data-controller="projects-search" id="projects-container">
    <div class="justify_between_container mb-2 mt-8">
      <div class="icon_search_parent_div">
        <div class="icon_parent_div"><i class="fas fa-search gray_icon"></i></div>
        <input type="search" name="query" id="projects-search" class="search search_icon_inp" placeholder="Search projects..." />
      </div>
      <p class="medium_para">Total Projects: <%= @projects.count %></p>
    </div>
    <div id="projects">
      <% if @projects.any? %>
        <table class="table_gray">
          <thead class="bg-gray-200">
            <tr>
              <th class="py-2 light_para text-center w-16 px-2">
                No.
                <i class="fa-solid fa-sort sort_icon" 
                  data-action="click->projects-search#sort" 
                  data-sort="num">
                </i>
              </th>
              <th class="px-4 py-2 light_para text-start">
                Title
                <i class="fa-solid fa-sort sort_icon" 
                  data-action="click->projects-search#sort" 
                  data-sort="title">
                </i>
              </th>
              <th class="px-4 py-2 light_para text-end w-32">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200 list" data-projects-search-target="list">
            <% @projects.each_with_index do |project, index| %>
              <tr data-id="<%= project.id %>" class="text-sm py-2">
                <td class="px-2 py-2 small_para text-center w-16 px-2 num"><%= index + 1 %></td>
                <td class="px-2 py-2 small_para text-start title"><%= project.title %></td>
                <td class="px-2 py-2 normal_para w-32">
                  <div class="flex justify-end">
                    <%= link_to project, class: "link_hover_blue mx-2", title: "View Project" do %>
                      <i class="fas fa-eye"></i>
                    <% end %>
                    <%= link_to edit_project_path(project), class: "link_hover_blue mx-2", title: "Edit Project" do %>
                      <i class="fas fa-edit"></i>
                    <% end %>
                    <%= button_to project, method: :delete, class: "link_hover_red mx-2", 
                        data: { turbo_confirm: "Are you sure you want to delete this project?" },
                        title: "Delete Project" do %>
                      <i class="fas fa-trash-alt"></i>
                    <% end %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <ul class="pagination items_center_container mt-4" data-turbo="false"></ul>
      <% else %>
        <div class="items_center_container shadow-lg py-4">
          <p class="medium_para text-center">No projects found. Start by creating a new one!</p>
        </div>
      <% end %>
    </div>
  </div>
</div>
