<div class="mt-8">
	<% if @comment&.errors&.any? %>
		<div id="error_explanation" class="bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded-sm shadow-md mb-4 w-full">
			<h2 class="font-bold mb-2">
				<%= pluralize(@comment.errors.count, "error") %> prevented this comment from being saved:
			</h2>
			<ul class="list-disc pl-6 space-y-1">
				<% @comment.errors.full_messages.each do |msg| %>
					<li><%= msg %></li>
				<% end %>
			</ul>
		</div>
	<% end %>

	<div class="flex justify-between items-start mb-4 gap-4" data-controller="comment-form">
		<h2 class="text-2xl font-bold text-gray-900">Comments</h2>

		<div class="flex items-start gap-2" data-controller="comment-form">
			<button type="button"
							data-comment-form-target="button"
							data-action="click->comment-form#toggle"
							class="flex items-center px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-sm shadow-sm hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
				<i class="fa-solid fa-plus mr-2"></i>
				Add Comment
			</button>

			<%= render "comments/form", comment: @comment, issue: @issue, hidden_class: (@comment&.errors&.any? ? "" : "hidden") %>
		</div>
	</div>

  <div class="space-y-4">
    <% if issue.comments.any? %>
      <%= render partial: "comments/comment", collection: issue.comments.order(created_at: :desc), as: :comment %>
    <% else %>
      <p class="text-gray-500 text-center py-4">No comments yet. Be the first to add one!</p>
    <% end %>
  </div>
</div>
